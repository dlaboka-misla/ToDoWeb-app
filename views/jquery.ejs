<script src="https://code.jquery.com/jquery-3.5.0.min.js"></script>
<script>
    $(document).ready(function() {
        /* the function adds onclick event to a paragraph with name display
        and hides the paragraph. On its place shows an input text field by which the user
        can edit the value he previously inserted */
        $('p[name=display]').click(function() {
            $(this).closest('div').hide();
            $('input[name=edit]', $(this).closest('span')).show();
        })
    });
    // an ajax request to the server to delete an item at position index
    function deleteItem(index) {
        $.ajax({
            url: "/deleteItem",
            type: "post",
            data: {
                itemNumber: index
            },
            success: function(response) {
                window.location.reload(true);
            }
        });
    }
    // an ajax request to the server to edit an item at position index and to put new value
    function editInput(index, value) {
        if (value) {
            $.ajax({
                url: "/editInput",
                type: "post",
                data: {
                    itemNumber: index,
                    itemText: value
                },
                success: function(response) {}
            });
        } else {
            window.alert('Please insert text.')
        }
    };
    // an ajax request to the server to uncheck item if its checked
    function uncheckItem(i) {
        $.ajax({
            url: "/uncheckItem",
            type: "post",
            data: {
                itemNumber: i
            },
            success: function(response) {
                window.location.reload(true);
            }
        });
    };
    // an ajax request to the server to check item if its unchecked
    function checkItem(i) {
        $.ajax({
            url: "/checkItem",
            type: "post",
            data: {
                itemNumber: i
            },
            success: function(response) {
                window.location.reload(true);
            }
        });
    };
    // this function is called when clicked on the right curly bracket
    function getNextDay(dayOfWeek) {
        $.ajax({
            url: "/posts/" + dayOfWeek + "/next",
            type: "post",
            success: function(response) {
                console.log(response);
            }
        });
    };
    // is called when clicked on the left curly bracket
    function getPreviousDay(dayOfWeek) {
        $.ajax({
            url: "/posts/" + dayOfWeek + "/previous",
            type: "post",
            success: function(response) {
                console.log(response);
            }
        });
    };
    // is called when pressed on the right or left arrow key of the keyboard
    function getAnotherDay(dayOfWeek, event) {
        let keycode = event.keyCode;
        let type = "";
        if (keycode == 37) {
            type = "/previous";
        } else if (keycode == 39) {
            type = "/next";
        }
        if (type != "") {
            $.ajax({
                url: "/posts/" + dayOfWeek + type,
                type: "post",
                success: function(response) {
                    window.location.reload(true);
                }
            });
        }
    };
</script>